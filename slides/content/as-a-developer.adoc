[.intro.topic]
== As a *developer*

[NOTE.speaker]
====
----
As a developer
----
As a developer, you want to use asciidoctor in your build process:
* maven-plugin
* gradle-plugin
* ...
====


[.topic]
== As a developer

* Maven
* Gradle

//709x857
[.topic.bannerleft]
== _Build_

[ {caption-off}]
image::container.jpg[]

* {point-label} Using `dockerfile` and calling `docker build .`
* {point-label} `docker pull tomcat`

[.source.topic.code-small]
== Write In-Container Test

[source, java]
.PaymentTest.java
----
@RunWith(Arquillian.class) //<1>
public class PaymentTest {

  @Deployment public static JavaArchive createDeployment() { //<2>
    return ShrinkWrap.create(JavaArchive.class)
            .addPackages(true, "org.superbiz")
            .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml");
  }

}
----
<1> Arquillian Runner
<2> Shrinkwrap creates deployable file programmatically


[.source.topic.code-small]
== Write As Client Test

[source, java]
.HelloWorldServletTest.java
----
@RunWith(Arquillian.class)
public class HelloWorldServletTest {

  @Deployment(testable=false) //<1>
  public static WebArchive create() {
      return ShrinkWrap.create(WebArchive.class, "hello.war")
      .addClass(HelloWorldServlet.class);
  }

  @Test
  public void readContent(@ArquillianResource URL base) throws IOException { //<2>
    URL url = new URL(base, "HelloWorld"); //<3>
    String response = readResponse(url);
    assertThat(response, is("..."));
  }
----
<1> Sets test as `RunInClient` mode
<2> Gets context _URL_ with `@ArquillianResource`
<3> Opens a connection
